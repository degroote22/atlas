[debug] [2018-04-12T04:25:52.401Z] ----------------------------------------------------------------------
[debug] [2018-04-12T04:25:52.403Z] Command:       /usr/bin/node /usr/bin/firebase deploy --only functions
[debug] [2018-04-12T04:25:52.404Z] CLI Version:   3.17.4
[debug] [2018-04-12T04:25:52.404Z] Platform:      linux
[debug] [2018-04-12T04:25:52.404Z] Node Version:  v8.11.1
[debug] [2018-04-12T04:25:52.404Z] Time:          Thu Apr 12 2018 01:25:52 GMT-0300 (-03)
[debug] [2018-04-12T04:25:52.404Z] ----------------------------------------------------------------------
[debug] 
[debug] [2018-04-12T04:25:52.416Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2018-04-12T04:25:52.416Z] > authorizing via signed-in user
[debug] [2018-04-12T04:25:52.418Z] > refreshing access token with scopes: ["email","https://www.googleapis.com/auth/cloud-platform","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","openid"]
[debug] [2018-04-12T04:25:52.418Z] >>> HTTP REQUEST POST https://www.googleapis.com/oauth2/v3/token  
 { refresh_token: '1/ZgE1HoSdTt450rdbW7exgN1WihnwAtbtXQlgolM6io9N2T4pEJlOnH5kyT_okzjt',
  client_id: '563584335869-fgrhgmd47bqnekij5i8b5pr03ho849e6.apps.googleusercontent.com',
  client_secret: 'j9iVZfS8kkCEFUPaAeJV0sAi',
  grant_type: 'refresh_token',
  scope: 'email https://www.googleapis.com/auth/cloud-platform https://www.googleapis.com/auth/cloudplatformprojects.readonly https://www.googleapis.com/auth/firebase openid' } 
 Thu Apr 12 2018 01:25:52 GMT-0300 (-03)
[debug] [2018-04-12T04:25:53.102Z] <<< HTTP RESPONSE 200
[debug] [2018-04-12T04:25:53.127Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/projects/atlas-staging2  
  
 Thu Apr 12 2018 01:25:53 GMT-0300 (-03)
[debug] [2018-04-12T04:25:54.707Z] <<< HTTP RESPONSE 200
[debug] [2018-04-12T04:25:54.708Z] >>> HTTP REQUEST GET https://admin.firebase.com/v1/database/atlas-staging2/tokens  
  
 Thu Apr 12 2018 01:25:54 GMT-0300 (-03)
[debug] [2018-04-12T04:25:55.501Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'atlas-staging2'...
[info] 
[info] i  deploying functions
[debug] [2018-04-12T04:25:56.699Z] > [functions] package.json contents: {
  "name": "generate-thumbnail-functions",
  "description": "Generate Thumbnail Firebase Functions sample",
  "dependencies": {
    "child-process-promise": "^2.2.1",
    "firebase-admin": "^5.11.0",
    "firebase-functions": "^0.9.1",
    "mkdirp": "^0.5.1",
    "mkdirp-promise": "^5.0.1"
  },
  "devDependencies": {
    "eslint": "^4.13.1",
    "eslint-plugin-promise": "^3.6.0"
  },
  "scripts": {
    "lint": "./node_modules/.bin/eslint --max-warnings=0 .",
    "serve": "firebase serve --only functions",
    "shell": "firebase experimental:functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  }
}
[info] i  functions: ensuring necessary APIs are enabled...
[debug] [2018-04-12T04:25:56.701Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/cloudfunctions.googleapis.com/projectSettings/atlas-staging2?view=CONSUMER_VIEW  
  
 Thu Apr 12 2018 01:25:56 GMT-0300 (-03)
[debug] [2018-04-12T04:25:56.702Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/runtimeconfig.googleapis.com/projectSettings/atlas-staging2?view=CONSUMER_VIEW  
  
 Thu Apr 12 2018 01:25:56 GMT-0300 (-03)
[debug] [2018-04-12T04:25:58.148Z] <<< HTTP RESPONSE 200
[debug] [2018-04-12T04:25:58.226Z] <<< HTTP RESPONSE 200
[info] ✔  functions: all necessary APIs are enabled
[debug] [2018-04-12T04:25:58.227Z] >>> HTTP REQUEST GET https://appengine.googleapis.com/v1/apps/atlas-staging2  
  
 Thu Apr 12 2018 01:25:58 GMT-0300 (-03)
[debug] [2018-04-12T04:25:58.228Z] >>> HTTP REQUEST GET https://apikeys.googleapis.com/v1/projects/atlas-staging2/apiKeys  
  
 Thu Apr 12 2018 01:25:58 GMT-0300 (-03)
[debug] [2018-04-12T04:25:59.470Z] <<< HTTP RESPONSE 200
[debug] [2018-04-12T04:25:59.547Z] <<< HTTP RESPONSE 200
[info] i  functions: preparing functions directory for uploading...
[info] i  functions: packaged functions (82.42 KB) for uploading
[debug] [2018-04-12T04:25:59.825Z] >>> HTTP REQUEST GET https://www.googleapis.com/storage/v1/b/staging.atlas-staging2.appspot.com  
  
 Thu Apr 12 2018 01:25:59 GMT-0300 (-03)
[debug] [2018-04-12T04:26:00.260Z] <<< HTTP RESPONSE 200
[debug] [2018-04-12T04:26:00.261Z] >>> HTTP REQUEST POST https://www.googleapis.com/upload/storage/v1/b/staging.atlas-staging2.appspot.com/o?uploadType=media&name=firebase-functions-source  
 ReadStream {
  _readableState: 
   ReadableState {
     objectMode: false,
     highWaterMark: 65536,
     buffer: BufferList { head: [Object], tail: [Object], length: 1 },
     length: 65536,
     pipes: null,
     pipesCount: 0,
     flowing: null,
     ended: false,
     endEmitted: false,
     reading: false,
     sync: false,
     needReadable: false,
     emittedReadable: true,
     readableListening: false,
     resumeScheduled: false,
     destroyed: false,
     defaultEncoding: 'utf8',
     awaitDrain: 0,
     readingMore: false,
     decoder: null,
     encoding: null },
  readable: true,
  domain: null,
  _events: { end: [Function] },
  _eventsCount: 1,
  _maxListeners: undefined,
  path: '/tmp/firebase-functions-20218oTHk96g8QWuQ.zip',
  fd: 15,
  flags: 'r',
  mode: 438,
  start: 0,
  end: Infinity,
  autoClose: true,
  pos: 65536,
  bytesRead: 65536 } 
 Thu Apr 12 2018 01:26:00 GMT-0300 (-03)
[debug] [2018-04-12T04:26:01.137Z] <<< HTTP RESPONSE 200
[info] ✔  functions: functions folder uploaded successfully
[debug] [2018-04-12T04:26:01.139Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/projects/atlas-staging2/locations/us-central1/functions  
  
 Thu Apr 12 2018 01:26:01 GMT-0300 (-03)
[debug] [2018-04-12T04:26:02.558Z] <<< HTTP RESPONSE 200
[info] i  functions: updating function deletePhotos...
[debug] [2018-04-12T04:26:02.562Z] Trigger is:  {"eventTrigger":{"resource":"projects/_/instances/atlas-staging2/refs/groups/{groupid}/items/{itemid}","eventType":"providers/google.firebase.database/eventTypes/ref.delete"}}
[info] i  functions: updating function generateThumbnail...
[debug] [2018-04-12T04:26:02.563Z] Trigger is:  {"eventTrigger":{"resource":"projects/_/buckets/atlas-staging2.appspot.com","eventType":"providers/cloud.storage/eventTypes/object.change"}}
[debug] [2018-04-12T04:26:02.566Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/atlas-staging2/locations/us-central1/functions/deletePhotos 
query params: {"updateMask":"sourceArchiveUrl,name,labels,eventTrigger.resource,eventTrigger.eventType"} 
 { sourceArchiveUrl: 'gs://staging.atlas-staging2.appspot.com/firebase-functions-source',
  name: 'projects/atlas-staging2/locations/us-central1/functions/deletePhotos',
  labels: { 'deployment-tool': 'cli-firebase' },
  eventTrigger: 
   { resource: 'projects/_/instances/atlas-staging2/refs/groups/{groupid}/items/{itemid}',
     eventType: 'providers/google.firebase.database/eventTypes/ref.delete' } } 
 Thu Apr 12 2018 01:26:02 GMT-0300 (-03)
[debug] [2018-04-12T04:26:02.568Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/atlas-staging2/locations/us-central1/functions/generateThumbnail 
query params: {"updateMask":"sourceArchiveUrl,name,labels,eventTrigger.resource,eventTrigger.eventType"} 
 { sourceArchiveUrl: 'gs://staging.atlas-staging2.appspot.com/firebase-functions-source',
  name: 'projects/atlas-staging2/locations/us-central1/functions/generateThumbnail',
  labels: { 'deployment-tool': 'cli-firebase' },
  eventTrigger: 
   { resource: 'projects/_/buckets/atlas-staging2.appspot.com',
     eventType: 'providers/cloud.storage/eventTypes/object.change' } } 
 Thu Apr 12 2018 01:26:02 GMT-0300 (-03)
[debug] [2018-04-12T04:26:03.050Z] <<< HTTP RESPONSE 200
[debug] [2018-04-12T04:26:03.900Z] <<< HTTP RESPONSE 200
[debug] [2018-04-12T04:26:03.903Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YXRsYXMtc3RhZ2luZzIvdXMtY2VudHJhbDEvZGVsZXRlUGhvdG9zL2RsUFNzS2JWYkxB  
  
 Thu Apr 12 2018 01:26:03 GMT-0300 (-03)
[debug] [2018-04-12T04:26:03.904Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YXRsYXMtc3RhZ2luZzIvdXMtY2VudHJhbDEvZ2VuZXJhdGVUaHVtYm5haWwvcTVEaFBySEhSeVU  
  
 Thu Apr 12 2018 01:26:03 GMT-0300 (-03)
[debug] [2018-04-12T04:26:05.198Z] <<< HTTP RESPONSE 200
[debug] [2018-04-12T04:26:05.201Z] <<< HTTP RESPONSE 200
[debug] [2018-04-12T04:26:07.200Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YXRsYXMtc3RhZ2luZzIvdXMtY2VudHJhbDEvZGVsZXRlUGhvdG9zL2RsUFNzS2JWYkxB  
  
 Thu Apr 12 2018 01:26:07 GMT-0300 (-03)
[debug] [2018-04-12T04:26:07.203Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YXRsYXMtc3RhZ2luZzIvdXMtY2VudHJhbDEvZ2VuZXJhdGVUaHVtYm5haWwvcTVEaFBySEhSeVU  
  
 Thu Apr 12 2018 01:26:07 GMT-0300 (-03)
[debug] [2018-04-12T04:26:08.469Z] <<< HTTP RESPONSE 200
[debug] [2018-04-12T04:26:08.474Z] <<< HTTP RESPONSE 200
[debug] [2018-04-12T04:26:10.472Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YXRsYXMtc3RhZ2luZzIvdXMtY2VudHJhbDEvZGVsZXRlUGhvdG9zL2RsUFNzS2JWYkxB  
  
 Thu Apr 12 2018 01:26:10 GMT-0300 (-03)
[debug] [2018-04-12T04:26:10.476Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YXRsYXMtc3RhZ2luZzIvdXMtY2VudHJhbDEvZ2VuZXJhdGVUaHVtYm5haWwvcTVEaFBySEhSeVU  
  
 Thu Apr 12 2018 01:26:10 GMT-0300 (-03)
[debug] [2018-04-12T04:26:11.728Z] <<< HTTP RESPONSE 200
[debug] [2018-04-12T04:26:11.731Z] <<< HTTP RESPONSE 200
[debug] [2018-04-12T04:26:13.731Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YXRsYXMtc3RhZ2luZzIvdXMtY2VudHJhbDEvZGVsZXRlUGhvdG9zL2RsUFNzS2JWYkxB  
  
 Thu Apr 12 2018 01:26:13 GMT-0300 (-03)
[debug] [2018-04-12T04:26:13.732Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YXRsYXMtc3RhZ2luZzIvdXMtY2VudHJhbDEvZ2VuZXJhdGVUaHVtYm5haWwvcTVEaFBySEhSeVU  
  
 Thu Apr 12 2018 01:26:13 GMT-0300 (-03)
[debug] [2018-04-12T04:26:15.005Z] <<< HTTP RESPONSE 200
[debug] [2018-04-12T04:26:17.007Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/YXRsYXMtc3RhZ2luZzIvdXMtY2VudHJhbDEvZGVsZXRlUGhvdG9zL2RsUFNzS2JWYkxB  
  
 Thu Apr 12 2018 01:26:17 GMT-0300 (-03)
[debug] [2018-04-12T04:26:18.310Z] <<< HTTP RESPONSE 200
[info] ✔  functions[deletePhotos]: Successful update operation. 
